{# Copyright (C) 2012 - 2014 Open Source Matters, Inc. All rights reserved. #}
{# GNU General Public License version 2 or later; see LICENSE.txt #}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{{ lang|split("-")|first }}" lang="{{ lang|split("-")|first }}" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="blue" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ uri.base.path }}images/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ uri.base.path }}images/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ uri.base.path }}images/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="{{ uri.base.path }}images/apple-touch-icon-57-precomposed.png">
    <link rel="stylesheet/less" type="text/css" href="{{ uri.base.path }}jtracker/core/css/styles.less">
    <link rel="stylesheet" type="text/css" href="{{ uri.base.path }}vendor/font-awesome/css/font-awesome{{ jdebug ? "" : ".min" }}.css">
    {% block headerCSS %}{% endblock %}
    {% block JavaScriptHead %}
        <script src="{{ uri.base.path }}vendor/less/dist/less-1.5.0{{ jdebug ? "" : ".min" }}.js" type="text/javascript"></script>
    {% endblock %}
    <title>{% block title %}Joomla! Tracker{% endblock %}</title>
</head>
<body>
    {% block nav %}
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <ul class="nav navbar-nav">
                {% block prependMenu %}{% endblock %}
                {% include "trackerMenu.twig" %}
            </ul>
            <ul class="nav navbar-nav navbar-right">
                {% include "lang-switcher.twig" %}
            </ul>
            <div class="navbar-right">
                {% include "login.twig" %}
            </div>
        </nav>
    {% endblock %}

    <div class="body">
        <div class="container">

            {% for type, flashMessages in flashBag %}
                {% for flashMessage in flashMessages %}
                    <div class="alert alert-{{ type }}">
                        {{ flashMessage }}
                    </div>
                {% endfor %}
            {% endfor %}

            <noscript><h2 class="alert">Please activate JavaScript in your browser.</h2></noscript>

            <h2 class="page-title">{% block headerText %}Joomla! Tracker{% endblock %}</h2>

            {% block content %}{% endblock %}

            <!-- @todo find a way to replace debug output after processing the renderer -->
            <div class="debug">%%%DEBUG%%%</div>

        </div>
    </div>

    <div class="footer center">
        <div class="container">
            {% block footer %}
                {% include "footerMenu.twig" %}
            {% endblock %}
        </div>
    </div>

{% block JavaScriptBottom %}
    <script src="{{ uri.base.path }}vendor/jquery/jquery{{ jdebug ? "" : ".min" }}.js"></script>
    <script src="{{ uri.base.path }}vendor/bootstrap/js/collapse.js"></script>
    <script src="{{ uri.base.path }}vendor/bootstrap/js/dropdown.js"></script>
    <script src="{{ uri.base.path }}vendor/bootstrap/js/tab.js"></script>
    <script src="{{ uri.base.path }}vendor/bootstrap/js/tooltip.js"></script>

    <script src="{{ uri.base.path }}jtracker/core/js/jtracker{{ jdebug ? "" : ".min" }}.js"></script>

    <script src="{{ uri.base.path }}vendor/g11n-js/js/g11n{{ jdebug ? "" : ".min" }}.js"></script>
    <script src="{{ uri.base.path }}vendor/g11n-js/js/methods{{ jdebug ? "" : ".min" }}.js"></script>
    <script src="{{ uri.base.path }}vendor/g11n-js/js/phpjs{{ jdebug ? "" : ".min" }}.js"></script>

    <script type="text/javascript">{{ g11nJavaScript|raw }}</script>

    <script type="text/javascript">jQuery('.hasTooltip').tooltip();</script>

{% endblock %}

</body>
</html>
